<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>
You have several (at most 15) strings in the String[] <b>pieces</b>.
You are going to construct a single string called the haystack by shuffling the pieces into a random order and concatenating them.
(Each permutation of pieces is equally likely.)
</p>
<p>
You also have a String <b>needle</b>.
Compute and return the expected number of occurrences of the needle in the haystack.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>RandomConcat</td></tr><tr><td>Method:</td><td>expectation</td></tr><tr><td>Parameters:</td><td>String[], String</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double expectation(String[] pieces, String needle)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>Your return value must have an absolute or a relative error at most 1e-9.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>pieces</b> will have between 1 and 15 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>pieces</b> will have between 1 and 50 characters, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>needle</b> will have between 1 and 50 characters, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each character in each of the strings will be a lowercase English letter ('a'-'z').</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;hahaha&quot;}</pre></td></tr><tr><td><pre>&quot;aha&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.0</pre></td></tr><tr><td><table><tr><td colspan="2">Haystack will always be "hahaha". This string contains two occurrences of the string "aha". Note that the two occurrences overlap partially.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;hah&quot;,&quot;ah&quot;}</pre></td></tr><tr><td><pre>&quot;aha&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.5</pre></td></tr><tr><td><table><tr><td colspan="2">With probability 1/2 haystack will be "hahah" and there is one occurrence of the substring "aha". With probability 1/2 haystack will be "ahhah" and there are no occurrences of "aha". Hence, the expected number of occurrences is 0.5.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;t&quot;,&quot;o&quot;,&quot;p&quot;,&quot;c&quot;,&quot;o&quot;,&quot;d&quot;,&quot;e&quot;,&quot;r&quot;}</pre></td></tr><tr><td><pre>&quot;topcoder&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 4.9603174603174596E-5</pre></td></tr><tr><td><table><tr><td colspan="2">Two of the 8! permutations produce the haystack "topcoder" that exactly matches the given needle.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;hellotopc&quot;,&quot;oderhellotop&quot;,&quot;coderbye&quot;}</pre></td></tr><tr><td><pre>&quot;topcoder&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.6666666666666666</pre></td></tr><tr><td><table><tr><td colspan="2">If we concatenate the pieces in the given order, there will be two occurrences of "topcoder". Two other concatenation orders will produce a haystack with one occurrence of the needle, and the remaining three produce a haystack that contains no needles at all.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;aabaa&quot;,&quot;aabaaaaa&quot;,&quot;aba&quot;,&quot;goodluck&quot;,&quot;havefun&quot;}</pre></td></tr><tr><td><pre>&quot;aaaa&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.8000000000000016</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">5)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;a&quot;,&quot;a&quot;,&quot;aa&quot;,&quot;b&quot;}</pre></td></tr><tr><td><pre>&quot;aba&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.5</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>